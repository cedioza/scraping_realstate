datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model SearchHistory {
  id        Int        @id @default(autoincrement())
  portal    String     // idealista, fotocasa, altamira, etc.
  url       String     // La URL scrapeada
  status    String     // PENDING, PROCESSING, COMPLETED, FAILED
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  
  properties Property[]
}

model Property {
  id              Int           @id @default(autoincrement())
  searchId        Int
  search          SearchHistory @relation(fields: [searchId], references: [id])
  
  fechaReg        String?       // Fecha reg
  refId           String?       // ID o Ref. Catastral/registral
  entidad         String?       // Entidad
  estado          String?       // Estado
  tipo            String?       // Tipo
  localidad       String?       // Localidad
  direccion       String?       // Direcci√≥n
  enlaceMaps      String?       // Enlace a google maps
  precio          String?       // PRECIO
  m2              String?       // M2
  habitaciones    String?       // Habitaciones
  linkAnuncio     String?       // LINK ANUNCIO
  
  createdAt       DateTime      @default(now())
}
